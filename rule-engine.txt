Table "Rule" {
  "rule_id" INT [pk, increment]
  "group_rule_id" INT
  "version" INT [not null]
  "name" VARCHAR(100) [not null]
  "description" VARCHAR(255)
  "status" VARCHAR(20) [not null]
  "root_node_id" INT
  "created_at" DATETIME [default: `CURRENT_TIMESTAMP`]
  "updated_at" DATETIME [default: `CURRENT_TIMESTAMP`]
}

Table "RuleGroup" {
  "group_rule_id" INT [pk, increment]
  "name" VARCHAR(100) [not null]
  "description" VARCHAR(255)
}

Table "Condition" {
  "condition_id" INT [pk, increment]
  "field_name" VARCHAR(100) [not null]
  "operator" VARCHAR(20) [not null]
  "comparison_value" VARCHAR(255) [not null]
}

Table "ConditionNode" {
  "node_id" INT [pk, increment]
  "parent_node_id" INT
  "node_type" VARCHAR(20) [not null]
  "operator_type" VARCHAR(10)
  "condition_id" INT
  "rule_id" INT [not null]
  "position" INT
}

Table "Action" {
  "action_id" INT [pk, increment]
  "rule_id" INT [not null]
  "action_type" VARCHAR(50) [not null]
  "parameters" TEXT
  "status" VARCHAR(20)
  "created_at" DATETIME [default: `CURRENT_TIMESTAMP`]
}

Ref:"RuleGroup"."group_rule_id" < "Rule"."group_rule_id"

Ref:"ConditionNode"."node_id" < "ConditionNode"."parent_node_id"

Ref:"Condition"."condition_id" < "ConditionNode"."condition_id"

Ref:"Rule"."rule_id" < "ConditionNode"."rule_id"

Ref:"Rule"."rule_id" < "Action"."rule_id"
